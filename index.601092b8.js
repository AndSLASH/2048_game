document.addEventListener("DOMContentLoaded",function(){var e=function(){for(var e=r.getState(),t=s.querySelectorAll(".field-row"),n=0;n<4;n++)for(var a=t[n].querySelectorAll(".field-cell"),o=0;o<4;o++){var c=e[n][o];a[o].textContent=0===c?"":c,a[o].className=0===c?"field-cell":"field-cell field-cell--".concat(c)}},t=function(){c.textContent=r.getScore()},n=function(){"idle"===r.getStatus()?(d.textContent="Start",d.className="button start"):(d.textContent="Restart",d.className="button restart")},a=function(){var e=r.getStatus();l.classList.add("hidden"),i.classList.add("hidden"),u.classList.add("hidden"),"idle"===e?u.classList.remove("hidden"):"lose"===e?l.classList.remove("hidden"):"win"===e&&i.classList.remove("hidden")},o=function(){e(),t(),n(),a()},r=new Game,s=document.querySelector(".game-field"),c=document.querySelector(".game-score"),d=document.querySelector(".button.start"),l=document.querySelector(".message-lose"),i=document.querySelector(".message-win"),u=document.querySelector(".message-start");d.addEventListener("click",function(){"idle"===r.getStatus()?r.start():r.restart(),e(),t(),n(),a()}),document.addEventListener("keydown",function(o){if("playing"===r.getStatus()){switch(o.key){case"ArrowLeft":r.moveLeft();break;case"ArrowRight":r.moveRight();break;case"ArrowUp":r.moveUp();break;case"ArrowDown":r.moveDown();break;default:return}e(),t(),n(),a()}});var m=0,f=0;document.addEventListener("touchstart",function(e){e.target.closest(".game-field")&&e.preventDefault();var t=e.touches[0];m=t.clientX,f=t.clientY}),document.addEventListener("touchmove",function(e){e.target.closest(".game-field")&&e.preventDefault()}),document.addEventListener("touchend",function(e){if(e.target.closest(".game-field")&&e.preventDefault(),m&&f&&"playing"===r.getStatus()){var t=e.changedTouches[0],n=t.clientX-m,a=t.clientY-f;30>Math.abs(n)&&30>Math.abs(a)||(Math.abs(n)>Math.abs(a)?n>0?r.moveRight():r.moveLeft():a>0?r.moveDown():r.moveUp(),o(),m=0,f=0)}}),e(),t(),n(),a()});
//# sourceMappingURL=index.601092b8.js.map
