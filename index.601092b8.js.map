{"mappings":"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","sources":["<anon>","src/scripts/main.js"],"sourcesContent":["\"use strict\";\n/* global Game */ document.addEventListener(\"DOMContentLoaded\", function() {\n    var updateField = function updateField() {\n        var state = game.getState();\n        var rows = gameField.querySelectorAll(\".field-row\");\n        for(var i = 0; i < 4; i++){\n            var cells = rows[i].querySelectorAll(\".field-cell\");\n            for(var j = 0; j < 4; j++){\n                var value = state[i][j];\n                cells[j].textContent = value === 0 ? \"\" : value;\n                cells[j].className = value === 0 ? \"field-cell\" : \"field-cell field-cell--\".concat(value);\n            }\n        }\n    };\n    var updateScore = function updateScore() {\n        gameScore.textContent = game.getScore();\n    };\n    var updateButton = function updateButton() {\n        if (game.getStatus() === \"idle\") {\n            gameButton.textContent = \"Start\";\n            gameButton.className = \"button start\";\n        } else {\n            gameButton.textContent = \"Restart\";\n            gameButton.className = \"button restart\";\n        }\n    };\n    var updateMessages = function updateMessages() {\n        var gameStatus = game.getStatus();\n        messageLose.classList.add(\"hidden\");\n        messageWin.classList.add(\"hidden\");\n        messageStart.classList.add(\"hidden\");\n        if (gameStatus === \"idle\") messageStart.classList.remove(\"hidden\");\n        else if (gameStatus === \"lose\") messageLose.classList.remove(\"hidden\");\n        else if (gameStatus === \"win\") messageWin.classList.remove(\"hidden\");\n    };\n    var updateUI = function updateUI() {\n        updateField();\n        updateScore();\n        updateButton();\n        updateMessages();\n    };\n    var game = new Game();\n    var gameField = document.querySelector(\".game-field\");\n    var gameScore = document.querySelector(\".game-score\");\n    var gameButton = document.querySelector(\".button.start\");\n    var messageLose = document.querySelector(\".message-lose\");\n    var messageWin = document.querySelector(\".message-win\");\n    var messageStart = document.querySelector(\".message-start\");\n    gameButton.addEventListener(\"click\", function() {\n        if (game.getStatus() === \"idle\") game.start();\n        else game.restart();\n        updateField();\n        updateScore();\n        updateButton();\n        updateMessages();\n    });\n    document.addEventListener(\"keydown\", function(event) {\n        if (game.getStatus() !== \"playing\") return;\n        switch(event.key){\n            case \"ArrowLeft\":\n                game.moveLeft();\n                break;\n            case \"ArrowRight\":\n                game.moveRight();\n                break;\n            case \"ArrowUp\":\n                game.moveUp();\n                break;\n            case \"ArrowDown\":\n                game.moveDown();\n                break;\n            default:\n                return;\n        }\n        updateField();\n        updateScore();\n        updateButton();\n        updateMessages();\n    });\n    var startX = 0;\n    var startY = 0;\n    document.addEventListener(\"touchstart\", function(event) {\n        if (event.target.closest(\".game-field\")) event.preventDefault();\n        var touch = event.touches[0];\n        startX = touch.clientX;\n        startY = touch.clientY;\n    });\n    document.addEventListener(\"touchmove\", function(event) {\n        if (event.target.closest(\".game-field\")) event.preventDefault();\n    });\n    document.addEventListener(\"touchend\", function(event) {\n        if (event.target.closest(\".game-field\")) event.preventDefault();\n        if (!startX || !startY || game.getStatus() !== \"playing\") return;\n        var touch = event.changedTouches[0];\n        var diffX = touch.clientX - startX;\n        var diffY = touch.clientY - startY;\n        if (Math.abs(diffX) < 30 && Math.abs(diffY) < 30) return;\n        if (Math.abs(diffX) > Math.abs(diffY)) diffX > 0 ? game.moveRight() : game.moveLeft();\n        else diffY > 0 ? game.moveDown() : game.moveUp();\n        updateUI();\n        startX = 0;\n        startY = 0;\n    });\n    updateField();\n    updateScore();\n    updateButton();\n    updateMessages();\n});\n\n//# sourceMappingURL=index.601092b8.js.map\n","'use strict';\n\n/* global Game */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const game = new Game();\n\n  const gameField = document.querySelector('.game-field');\n  const gameScore = document.querySelector('.game-score');\n  const gameButton = document.querySelector('.button.start');\n  const messageLose = document.querySelector('.message-lose');\n  const messageWin = document.querySelector('.message-win');\n  const messageStart = document.querySelector('.message-start');\n\n  function updateField() {\n    const state = game.getState();\n    const rows = gameField.querySelectorAll('.field-row');\n\n    for (let i = 0; i < 4; i++) {\n      const cells = rows[i].querySelectorAll('.field-cell');\n\n      for (let j = 0; j < 4; j++) {\n        const value = state[i][j];\n\n        cells[j].textContent = value === 0 ? '' : value;\n\n        cells[j].className =\n          value === 0 ? 'field-cell' : `field-cell field-cell--${value}`;\n      }\n    }\n  }\n\n  function updateScore() {\n    gameScore.textContent = game.getScore();\n  }\n\n  function updateButton() {\n    if (game.getStatus() === 'idle') {\n      gameButton.textContent = 'Start';\n      gameButton.className = 'button start';\n    } else {\n      gameButton.textContent = 'Restart';\n      gameButton.className = 'button restart';\n    }\n  }\n\n  function updateMessages() {\n    const gameStatus = game.getStatus();\n\n    messageLose.classList.add('hidden');\n    messageWin.classList.add('hidden');\n    messageStart.classList.add('hidden');\n\n    if (gameStatus === 'idle') {\n      messageStart.classList.remove('hidden');\n    } else if (gameStatus === 'lose') {\n      messageLose.classList.remove('hidden');\n    } else if (gameStatus === 'win') {\n      messageWin.classList.remove('hidden');\n    }\n  }\n\n  gameButton.addEventListener('click', () => {\n    if (game.getStatus() === 'idle') {\n      game.start();\n    } else {\n      game.restart();\n    }\n\n    updateField();\n    updateScore();\n    updateButton();\n    updateMessages();\n  });\n\n  document.addEventListener('keydown', (event) => {\n    if (game.getStatus() !== 'playing') {\n      return;\n    }\n\n    switch (event.key) {\n      case 'ArrowLeft':\n        game.moveLeft();\n        break;\n      case 'ArrowRight':\n        game.moveRight();\n        break;\n      case 'ArrowUp':\n        game.moveUp();\n        break;\n      case 'ArrowDown':\n        game.moveDown();\n        break;\n      default:\n        return;\n    }\n\n    updateField();\n    updateScore();\n    updateButton();\n    updateMessages();\n  });\n\n  let startX = 0;\n  let startY = 0;\n\n  function updateUI() {\n    updateField();\n    updateScore();\n    updateButton();\n    updateMessages();\n  }\n\n  document.addEventListener('touchstart', (event) => {\n    if (event.target.closest('.game-field')) {\n      event.preventDefault();\n    }\n\n    const touch = event.touches[0];\n\n    startX = touch.clientX;\n    startY = touch.clientY;\n  });\n\n  document.addEventListener('touchmove', (event) => {\n    if (event.target.closest('.game-field')) {\n      event.preventDefault();\n    }\n  });\n\n  document.addEventListener('touchend', (event) => {\n    if (event.target.closest('.game-field')) {\n      event.preventDefault();\n    }\n\n    if (!startX || !startY || game.getStatus() !== 'playing') {\n      return;\n    }\n\n    const touch = event.changedTouches[0];\n    const diffX = touch.clientX - startX;\n    const diffY = touch.clientY - startY;\n\n    if (Math.abs(diffX) < 30 && Math.abs(diffY) < 30) {\n      return;\n    }\n\n    if (Math.abs(diffX) > Math.abs(diffY)) {\n      diffX > 0 ? game.moveRight() : game.moveLeft();\n    } else {\n      diffY > 0 ? game.moveDown() : game.moveUp();\n    }\n\n    updateUI();\n    startX = 0;\n    startY = 0;\n  });\n\n  updateField();\n  updateScore();\n  updateButton();\n  updateMessages();\n});\n"],"names":["document","addEventListener","updateField","state","game","getState","rows","gameField","querySelectorAll","i","cells","j","value","textContent","className","concat","updateScore","gameScore","getScore","updateButton","getStatus","gameButton","updateMessages","gameStatus","messageLose","classList","add","messageWin","messageStart","remove","updateUI","Game","querySelector","start","restart","event","key","moveLeft","moveRight","moveUp","moveDown","startX","startY","target","closest","preventDefault","touch","touches","clientX","clientY","changedTouches","diffX","diffY","Math","abs"],"version":3,"file":"index.601092b8.js.map"}